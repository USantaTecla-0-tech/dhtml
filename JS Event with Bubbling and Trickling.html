<!DOCTYPE html>
<html>
    <head>
        <title>JS Event. Bubbling and Trickling</title>
		<style>
			div {
				margin-bottom : 2%;
				position : static;
				float: left;
			}
			
			.nivel-1 {
				width : 100%;
				background-color : #61a0a2;
			}
			
			div div {
				width : 45%;
				margin-right : 2%;
				margin-left : 2%;
			}
			
			.nivel-2 {
				background-color : #5b85c7;
			}
			
			.nivel-3 {
				background-color : #629676;
			}
			
			.nivel-4 {
				background-color : #c3874c;
			}
		</style>    
		<script language="javascript">
		
			function onLoad(){
				for(let div of document.getElementsByTagName("div")) {
					//div.addEventListener("click", alertBubblingFromListener);
					//div.addEventListener("click", alertTricklingFromListener, true);
					div.addEventListener("click", alertBubblingFromListenerWithoutPropagation);
					div.addEventListener("click", alertTricklingFromListenerWithoutPropagation, true);
				}
			}
			
			function getMsg(event, element){
				if (event.count == undefined) {
					event.count = 0;
				}
				event.count++;
				return element.getAttribute("class") + " con " + event.count;
			}

			function alertBubblingFromHTML(event, element){
				console.log("Bubbling form HTML: " + getMsg(event, element));
			}

			function alertBubblingFromListener(event){
				console.log("Bubbling form addEventListener: " + getMsg(event, this));
			}

			function alertTricklingFromListener(event){
				console.log("Trickling form addEventListener: " + getMsg(event, this));
			}

			function alertBubblingFromListenerWithoutPropagation(event){
				console.log("Bubbling form addEventListener without Propagation: " + getMsg(event, this));
				if (this.getAttribute("class") === "nivel-2 derecha") {
					console.log("PARA burbujeo");
					event.stopPropagation();
				}
			}

			function alertTricklingFromListenerWithoutPropagation(event){
				console.log("Trickling form addEventListener without Propagation: " + getMsg(event, this));
				if (this.getAttribute("class") === "nivel-3 izquierda") {
					console.log("PARA goteo");
					event.stopPropagation();
				}
			}
		</script>
	</head>
    <body onload="onLoad();">
        <div class = "nivel-1 izquierda" 
            onclick = "alertBubblingFromHTML(event, this);">
            <h1>Nivel 1</h1>
            <h2>Izquierda</h2>
            <div class = "nivel-2 izquierda" 
                onclick = "alertBubblingFromHTML(event, this);">
                <h2>Nivel 2</h2>
                <h3>Izquierda</h3>
                <div class = "nivel-3 izquierda" 
                    onclick = "alertBubblingFromHTML(event, this);">
					<h3>Nivel 3</h3>
                    <h4>Izquierda</h4>
                    <div class = "nivel-4 izquierda" 
                        onclick = "alertBubblingFromHTML(event, this);">
						<h4>Nivel 4</h4>
                        <h5>Izquierda</h5>
                    </div>
                    <div class = "nivel-4 derecha" 
                        onclick = "alertBubblingFromHTML(event, this);">
                        <h4>Nivel 4</h4>
                        <h5>Derecha</h5>
                    </div>
                </div>
                <div class = "nivel-3 derecha" 
                    onclick = "alertBubblingFromHTML(event, this);">
                    <h3>Nivel 3</h3>
                    <h4>Derecha</h4>
                    <div class = "nivel-4 izquierda" 
                        onclick = "alertBubblingFromHTML(event, this);">
                        <h4>Nivel 4</h4>
                        <h5>Izquierda</h5>
                    </div>
                    <div class = "nivel-4 derecha" 
                        onclick = "alertBubblingFromHTML(event, this);">
                        <h4>Nivel 4</h4>
                        <h5>Derecha</h5>
                    </div>
                </div>
            </div>
            <div class = "nivel-2 derecha" 
                onclick = "alertBubblingFromHTML(event, this);">
                <h2>Nivel 2</h2>
                <h3>Derecha</h3>
                <div class = "nivel-3 izquierda" 
                    onclick = "alertBubblingFromHTML(event, this);">
					<h3>Nivel 3</h3>
                    <h4>Izquierda</h4>
                    <div class = "nivel-4 izquierda" 
                        onclick = "alertBubblingFromHTML(event, this);">
						<h4>Nivel 4</h4>
                        <h5>Izquierda</h5>
                    </div>
                    <div class = "nivel-4 derecha"  
                        onclick = "alertBubblingFromHTML(event, this);">
                        <h4>Nivel 4</h4>
                        <h5>Derecha</h5>
                    </div>
                </div>
                <div class = "nivel-3 derecha" 
                    onclick = "alertBubblingFromHTML(event, this);">
                    <h3>Nivel 3</h3>
                    <h4>Derecha</h4>
                    <div class = "nivel-4 izquierda" 
                        onclick = "alertBubblingFromHTML(event, this);">
                        <h4>Nivel 4</h4>
                        <h5>Izquierda</h5>
                    </div>
                    <div class = "nivel-4 derecha" 
                        onclick = "alertBubblingFromHTML(event, this);">
                        <h4>Nivel 4</h4>
                        <h5>Derecha</h5>
                    </div>
                </div>
            </div>
        </div>
        <div class = "nivel-1 derecha" 
            onclick = "alertBubblingFromHTML(event, this);">
            <h1>Nivel 1</h1>
            <h2>Derecha</h2>
            <div class = "nivel-2 izquierda" 
                onclick = "alertBubblingFromHTML(event, this);">
                <h2>Nivel 2</h2>
                <h3>Izquierda</h3>
                <div class = "nivel-3 izquierda" 
                    onclick = "alertBubblingFromHTML(event, this);">
					<h3>Nivel 3</h3>
                    <h4>Izquierda</h4>
                    <div class = "nivel-4 izquierda" 
                        onclick = "alertBubblingFromHTML(event, this);">
						<h4>Nivel 4</h4>
                        <h5>Izquierda</h5>
                    </div>
                    <div class = "nivel-4 derecha" 
                        onclick = "alertBubblingFromHTML(event, this);">
                        <h4>Nivel 4</h4>
                        <h5>Derecha</h5>
                    </div>
                </div>
                <div class = "nivel-3 derecha" 
                    onclick = "alertBubblingFromHTML(event, this);">
                    <h3>Nivel 3</h3>
                    <h4>Derecha</h4>
                    <div class = "nivel-4 izquierda" 
                        onclick = "alertBubblingFromHTML(event, this);">
                        <h4>Nivel 4</h4>
                        <h5>Izquierda</h5>
                    </div>
                    <div class = "nivel-4 derecha" 
                        onclick = "alertBubblingFromHTML(event, this);">
                        <h4>Nivel 4</h4>
                        <h5>Derecha</h5>
                    </div>
                </div>
            </div>
            <div class = "nivel-2 derecha" 
                onclick = "alertBubblingFromHTML(event, this);">
                <h2>Nivel 2</h2>
                <h3>Derecha</h3>
                <div class = "nivel-3 izquierda" 
                    onclick = "alertBubblingFromHTML(event, this);">
					<h3>Nivel 3</h3>
                    <h4>Izquierda</h4>
                    <div class = "nivel-4 izquierda" 
                        onclick = "alertBubblingFromHTML(event, this);">
						<h4>Nivel 4</h4>
                        <h5>Izquierda</h5>
                    </div>
                    <div class = "nivel-4 derecha" 
                        onclick = "alertBubblingFromHTML(event, this);">
                        <h4>Nivel 4</h4>
                        <h5>Derecha</h5>
                    </div>
                </div>
                <div class = "nivel-3 derecha" 
                    onclick = "alertBubblingFromHTML(event, this);">
                    <h3>Nivel 3</h3>
                    <h4>Derecha</h4>
                    <div class = "nivel-4 izquierda" 
                        onclick = "alertBubblingFromHTML(event, this);">
                        <h4>Nivel 4</h4>
                        <h5>Izquierda</h5>
                    </div>
                    <div class = "nivel-4 derecha" 
                        onclick = "alertBubblingFromHTML(event, this);">
                        <h4>Nivel 4</h4>
                        <h5>Derecha</h5>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>